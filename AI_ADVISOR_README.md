# AI 投資顧問功能使用指南

## 功能概述

新增的AI投資顧問功能可以：
- 分析您的IBKR投資組合
- 提供個性化的投資建議
- 回答投資相關問題
- 評估風險水平
- 建議投資組合調整

## 設置步驟

### 1. 配置OpenAI API密鑰

1. 複製 `.env.example` 文件為 `.env`：
   ```bash
   cp .env.example .env
   ```

2. 在 `.env` 文件中添加您的OpenAI API密鑰：
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   ```

3. 如果您沒有OpenAI API密鑰，請到 [OpenAI官網](https://platform.openai.com/api-keys) 申請

### 2. 啟動系統

1. 確保後端服務正在運行：
   ```bash
   cd backend
   python main.py
   ```

2. 啟動前端服務：
   ```bash
   cd frontend
   npm run dev
   ```

### 3. 使用AI投資顧問

1. 打開瀏覽器訪問 `http://localhost:3000`
2. 點擊右上角的 "AI 投資顧問" 按鈕
3. 在AI投資顧問頁面中：
   - 首先點擊 "Connect IBKR" 連接您的IBKR賬戶
   - 系統會自動獲取您的持倉信息
   - 開始與AI對話，詢問投資問題

## 功能特色

### 智能分析
- 自動分析您的投資組合表現
- 計算各股票的損益情況
- 評估整體投資組合風險

### 個性化建議
- 基於您的實際持倉提供建議
- 考慮您的現金餘額和購買力
- 提供具體可操作的投資策略

### 快速提問
系統提供以下快速提問選項：
- 分析我的投資組合
- 推薦新的投資機會
- 評估風險水平
- 建議調整持倉
- 市場趨勢分析
- 現金配置建議

## 使用示例

### 示例對話

**用戶**: "分析我的投資組合"

**AI**: "根據您的投資組合分析：

📊 **投資組合概況**
- 總資產價值: $125,000
- 現金餘額: $15,000
- 總持倉: 5個股票
- 整體收益率: +8.5%

📈 **表現分析**
- AAPL: +12.3% (表現優秀)
- TSLA: -5.2% (需要關注)
- MSFT: +6.8% (穩健增長)

💡 **建議**
1. 考慮減持TSLA，增加現金比例
2. 可以考慮增加一些防禦性股票
3. 保持現有的AAPL和MSFT持倉

⚠️ **風險提醒**
您的投資組合科技股比重較高，建議適當分散風險。"

## 注意事項

1. **投資風險**: AI提供的建議僅供參考，不構成投資建議。投資有風險，請謹慎決策。

2. **數據準確性**: 請確保IBKR連接正常，以獲取準確的持倉數據。

3. **API限制**: OpenAI API有使用限制，請合理使用。

4. **隱私保護**: 您的投資數據僅用於本地分析，不會上傳到第三方服務。

## 故障排除

### 常見問題

**Q: AI沒有回應**
A: 檢查OpenAI API密鑰是否正確配置，以及網絡連接是否正常。

**Q: 無法獲取持倉數據**
A: 確保IBKR Gateway正在運行，並且連接參數正確。

**Q: 分析結果不準確**
A: 請確保持倉數據是最新的，可以點擊"刷新"按鈕更新數據。

## 技術支持

如果您遇到任何問題，請檢查：
1. 後端日誌文件
2. 瀏覽器控制台錯誤
3. 網絡連接狀態
4. API密鑰配置

---

享受您的AI投資顧問體驗！ 🚀
